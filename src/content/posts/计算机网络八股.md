---
title: 计算机网络八股
published: 2026-01-19
description: ''
image: ''
tags: ['面试','计算机网络']
category: '计算机网络'
draft: false 
lang: ''
---

## 1.介绍一下OSI七层模型，各层协议有哪些？
OSI 七层模型是网络通信分层框架，把网络通信拆成七层，每层只管自己的事，通过接口跟上下层打交道。

从下往上依次是：

1. 物理层：最底层，管的是比特流怎么在物理介质上传输。网线、光纤、无线电波这些都是物理层的东西。

2. 数据链路层：把比特流组成帧，用 MAC 地址在局域网内寻址，还负责差错检测。以太网、（点对点协议）PPP 协议在这层。

3. 网络层：管的是跨网络的数据传输，用 IP 地址寻址，负责路由选择。IP 协议、ICMP 协议、ARP协议在这层。

4. 传输层：提供端到端的通信，管的是进程级别的通信。TCP 提供可靠传输，UDP 提供快速但不保证可靠的传输。

5. 会话层：管理通信会话的建立、维护和终止。NetBIOS、RPC 这些在这层。

6. 表示层：管数据格式转换、加密解密、压缩解压。JPEG、MPEG、SSL/TLS 的加密功能在这层。

7. 应用层：最上层，直接跟用户打交道。HTTP、HTTP、FTP、SMTP、DNS 这些都是应用层协议。

网络分层的好处：对各层实现了解耦，层与层之间不会有关联性，就比如应用层HTTP从1.1升到2.0时，也不会对传输层、网络层有影响。

不过OSI也只是理论模型，现实因特网中是使用了TCP/IP网络模型，对OSI模型进行了简化，将应用层/表示层/会话层统一成了应用层，数据链路层和物理层统一成了网络接口层。

## 2.TCP/IP网络模型有哪几层？

TCP/IP 网络模型主要有四层，从上到下分别是，应用层、传输层、网络层、网络接口层。

- 应用层：负责为应用软件提供网络服务，例如HTTP（管网页）、FTP（管文件传输）、HTTPS、DNS（管域名）、SMTP（管邮件）等协议。
- 传输层：负责为应用程序层提供数据传输服务，管的是进程之间的通信。传输层协议主要有TCP和UDP，TCP是可靠传输协议，UDP是不可靠的传输协议。
- 网络层：负责主机寻址，打包和路由功能。网络层的核心协议是IP、ARP、ICMP等协议。IP协议负责寻址和路由，ARP协议负责获取MAC地址，ICMP负责提供诊断功能并报告错误。
- 网络接口层：负责为网络层提供「链路级别」传输的服务，负责在以太网、Wifi这样的物理网络上发送原始数据包，工作在网卡这个层次，使用 MAC 地址来标示网络上的设备。以太网、Wi-Fi、PPP这些协议都在这层。

## 3.IP协议和TCP协议属于哪一层？
IP协议属于网络层，TCP协议属于传输层。

## 4.网络为什么要分层？
分层是为了降低耦合，各层相互独立之后，上层可以不关心下层的实现，只关心下层提供的接口服务，有利于排查网络问题，能更精细定位问题在哪一层。

而且分层之后层一层之间不会产生关联性，不会因为某个层的改动，影响了其他层，比如我们应用层的 HTTP 协议，从 HTTP1.1 升级到 HTTP2.0 的时候，并不会对传输层、网络层等有影响，或者网络层的 IPv4 协议升级为 IPv6 协议的时候，也不会影响应用层、传输层。

## 5.输入网址后，期间发生了什么？
在浏览器输入网址后（浏览器端）：

1. 浏览器会先解析 URL，解析出域名、资源路径、端口等信息，然后构造 HTTP 请求报文。

2. 接着进行域名解析，将域名解析为 IP 地址，会先查浏览器缓存缓存是否有域名信息，如果有就返回 IP 地址，没有就会查看本地系统 host 文件有没有域名信息，如果有就返回 IP 地址，如果没有就去查本地 DNS 服务器，如果本地 DNS 服务器缓存中有域名信息，就返回 IP 地址，否则本地 DNS 服务器会去根域名服务器->顶级域名服务器->权威域名服务器询问，最后拿着返回的 IP 交给浏览器。(浏览器缓存->系统缓存->路由器缓存->DNS服务器)

3. 由于 HTTP 是基于 TCP 传的，所以在发送 HTTP 请求前，需要进行三次握手，在客户端发送第一次握手的时候，TCP 头部会填上 SYN 标记位，同时上目标端口和源端口的信息。源端口是浏览器随机生成的，目标端口要看是 HTTP 还是 HTTPS，如果是 HTTP 默认端口是 80，如果是 HTTPS 默认是 443。如果是HTTPS，还需要进行TLS四次握手，协商加密密钥。

4. 然后到网络层，会加上 IP 头，同时填上目标 IP 地址和源 IP 地址。

5. 然后到数据链路层，会通过 ARP 协议，获取路由器的 MAC 地址，然后会加上 MAC 头，填上目标 MAC 地址和源 MAC 地址。

6. 然后到物理层之后，直接把数据包，转发给路由器，路由器再通过下一跳，最终找到目标服务器，然后目标服务器收到客户的 SYN 报文之后，会响应第二次握手。

7. 当双方都完成三次握手后，如果是 HTTP 协议，客户端就会将 HTTP 请求就会发送给目标服务器；如果是 HTTPS 协议，客户端还要和服务端进行 TLS 四次握手之后，客户端才会将 HTTP 报文发送给目标服务器。

8. 目标服务器收到 HTTP 请求消息后，就返回 HTTP 响应消息，浏览器会对响应消息进行解析渲染，呈现给用户。

处理与响应（服务器端）：
1. 服务器接收与解包。数据包历经千辛万苦到达服务器。服务器网卡收到后，操作系统开始一层层脱壳（解封装）：去掉 MAC 头 -> 去掉 IP 头 -> 去掉 TCP 头，最后把纯净的 HTTP 数据交给监听 80 或 443 端口的 Web 服务器进程（如 Nginx）。

2. 处理与响应。服务器处理请求（读数据库、运行逻辑），生成 HTTP 响应报文。这个响应报文会经历同样的封装过程，原路返回给浏览器。

3. 浏览器渲染。浏览器收到 HTML 代码，开始解析 DOM 树，下载 CSS 和 JS，最后把漂亮的网页渲染出来展示给用户。


![Snipaste_2026-01-19_22-48-27](./image/计算机网络/Snipaste_2026-01-19_22-48-27.png)

## 6.DNS是如何解析的，属于哪一层协议？
DNS 属于应用层的协议，客户端在进行 DNS 解析之前，会先查看浏览器和操作系统是否有缓存该域名对应的IP地址，没有就会查看本地系统 host 文件有没有域名信息，如果有就返回 IP 地址，如果没有就会向本地DNS服务器发出查询请求。

如果本地DNS服务器有缓存也直接返回 IP 地址，如果本地DNS服务器没有缓存，就接着本地DNS向根DNS发送查询请求。

根DNS服务器收到请求后会返回顶级域名服务器的 IP 地址，然后本地DNS服务器再向顶级域名服务器发出查询请求，顶级DNS服务器收到请求后会返回权威域名服务器的 IP 地址，然后本地DNS服务器再向权威域名服务器发出查询请求，权威域名服务器收到请求后，就会返回域名对应的 IP 地址了。

最后本地DNS 服务器返回查询结果给客户端，同时本地域名服务器把返回的结果保存到缓存，以备下一次使用。

客户端通过这个 IP 地址就可以访问目标Web服务器了。到这里，DNS查询的整个过程就结束了。

## 7.DNS域名解析使用了什么协议？
在DNS中，域名解析请求和响应都是基于UDP进行传输的。

UDP是一种无连接的传输层协议，它提供了一种简单的传输机制，适用于实时性要求较高的应用场景。DNS使用UDP协议进行域名解析是因为域名解析通常是短小而频繁的请求，UDP的无连接特性可以减少建立和断开连接的开销，并提高解析的效率。不过DNS也并非完全不用TCP，当响应数据超过512字节时会使用TCP。

UDP对与TCP的缺点是没办法保证数据的可靠传输，针对这个缺陷，可以在应用层实现一个超时重传机制，如果域名解析请求在一定时间内没收到响应，那么就重发域名解析请求。

## 8.输入域名是如何知道端口的？
```
http://xiaolincoding.com/，默认端口是80
https://xiaolincoding.com/，默认端口是 443
http://xiaolincoding.com:8080/，指定的端口是 8080
```
HTTP 默认端口是 80，HTTPS 默认端口是 443，如果用户指定了端口，比如域名:8080，这时候就会使用 8080 作为目标端口。